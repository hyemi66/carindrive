<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Admin_Car">

	<select id="car_count" resultType="int">
		select count(c_num) from c_car
	     <where>
	       <if test="find_field == ''"></if>
	       <if test="find_field == 'c_name'"> 
	         c_name like #{find_name}
	       </if>
	       <if test="find_field == 'c_brand'"> 
	         c_brand like #{find_name}     
	       </if>
	     </where>   
	</select>
	
	<select id="car_list" parameterType="page" resultType="car">
		select * from (
     select rowNum rNum, c_num, c_name,c_brand,c_year,
     c_color,c_type,c_oil from (select * from c_car
     <where>
      <if test="find_field == ''"></if> 
      <if test="find_field == 'c_name'"> 
        c_name like #{find_name}
      </if>
      <if test="find_field == 'c_brand'"> 
        c_brand like #{find_name}
      </if>
     </where>     
     order by c_num desc)) where rNum &gt;= #{startrow}
     and rNum &lt;= #{endrow} 
	</select>

	<select id="cNumSeq_Find" resultType="int">
     select car_seq.nextval from dual
   </select>
</mapper>