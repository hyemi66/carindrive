<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Admin_Gongji">

	<select id="gongji_count" resultType="int">
		select count(cs_no) from c_service
	     <where>
	       <if test="find_field == ''"></if>
	       <if test="find_field == 'cs_title'"> 
	         cs_title like #{find_name}
	       </if>
	       <if test="find_field == 'cs_cont'"> 
	         cs_cont like #{find_name}     
	       </if>
	     </where>   
	</select>
	
	<select id="gongji_list" parameterType="page" resultType="gongji">
		select * from (
     select rowNum rNum, cs_no, cs_name,cs_title,cs_hit,
     cs_date from (select * from c_service
     <where>
      <if test="find_field == ''"></if> <!-- 검색어를 입력하지 않은 경우 => 전체목록 -->
      <if test="find_field == 'cs_title'"> <!-- 제목으로 검색한 경우 -->
        cs_title like #{find_name} <!--  sql문에서 like는 ~와 비슷한 문자를 검색하는 검색연산자 -->
      </if>
      <if test="find_field == 'cs_cont'"> <!-- 내용으로 검색한 경우 -->
        cs_cont like #{find_name}
      </if>
     </where>     
     order by cs_no desc)) where rNum &gt;= #{startrow}
     and rNum &lt;= #{endrow} 
	</select>
	<select id="csNoSeq_Find" resultType="int">
     select cs_no_seq.nextval from dual
   </select>
</mapper>